<input id="msg" placeholder="Ask about visa..." />
<button onclick="send()">Send</button>

<div id="chat"></div>

<script>
async function send(){
    const input = document.getElementById("msg");
    const text = input.value;

    if(!text) return;

    // Show user message
    document.getElementById("chat").innerHTML += 
        "<p><b>You:</b> " + text + "</p>";

    input.value = "";

    try {
        const res = await fetch("http://localhost:5000/chat",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body: JSON.stringify({message:text})
        });

        const data = await res.json();

        document.getElementById("chat").innerHTML += 
            "<p><b>Bot:</b> " + data.reply + "</p>";

    } catch(err){
        document.getElementById("chat").innerHTML += 
            "<p style='color:red'>Server error</p>";
    }
}

// Press Enter to send
document.getElementById("msg")
.addEventListener("keypress", function(e){
    if(e.key === "Enter"){
        send();
    }
});
</script>
